@{
    ViewBag.Title = "Capture Image";
}

<h2>Capture Image</h2>

<form id="imageForm" action="/Home/UploadImage" method="post" enctype="multipart/form-data">
    <input type="file" id="fileInput" name="imageFile" accept="image/*" capture="camera" style="display: none;" />
    <button type="button" id="capture">Capture Image</button>
    <img id="capturedImage" src="#" alt="Captured Image" style="display:none; width: 320px; height: 240px;" />
    <input type="submit" value="Upload Image" style="display:none;" id="uploadButton" />
</form>

<script>
    document.getElementById('capture').addEventListener('click', function() {
        document.getElementById('fileInput').click();
    });

    document.getElementById('fileInput').addEventListener('change', function() {
        if (this.files && this.files.length > 0) {
            const file = this.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const img = document.getElementById('capturedImage');
                img.src = e.target.result;
                img.style.display = 'block';
            };

            reader.readAsDataURL(file);
            document.getElementById('uploadButton').style.display = 'block';
        }
    });

    document.getElementById('imageForm').addEventListener('submit', function(e) {
        const fileInput = document.getElementById('fileInput');
        if (!fileInput.files || fileInput.files.length === 0) {
            e.preventDefault();
            alert('Please capture an image first.');
        }
    });
</script>